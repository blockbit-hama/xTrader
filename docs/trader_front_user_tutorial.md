# xTrader Frontend 사용자 튜토리얼

이 문서는 xTrader 거래소의 프론트엔드 인터페이스(trader_front)의 UI/UX 컴포넌트들과 각각의 역할에 대해 상세히 설명합니다.

## 📋 목차

1. [개요](#개요)
2. [전체 레이아웃](#전체-레이아웃)
3. [헤더 컴포넌트](#헤더-컴포넌트)
4. [차트 컴포넌트](#차트-컴포넌트)
5. [주문서 컴포넌트](#주문서-컴포넌트)
6. [거래 폼 컴포넌트](#거래-폼-컴포넌트)
7. [거래 내역 컴포넌트](#거래-내역-컴포넌트)
8. [실시간 데이터 연동](#실시간-데이터-연동)
9. [사용자 워크플로우](#사용자-워크플로우)
10. [기술적 특징](#기술적-특징)

## 개요

xTrader Frontend는 전문적인 암호화폐 거래 인터페이스를 제공하는 React 기반 웹 애플리케이션입니다. 실시간 데이터 처리, 직관적인 사용자 경험, 그리고 전문 트레이더를 위한 고급 기능들을 포함하고 있습니다.

### 주요 특징
- **실시간 데이터**: WebSocket을 통한 실시간 시장 데이터 업데이트
- **전문적 UI**: 다크 테마 기반의 전문 트레이딩 인터페이스
- **반응형 디자인**: 다양한 화면 크기에 최적화된 레이아웃
- **직관적 UX**: 클릭-투-필, 드래그 앤 드롭 등 직관적인 상호작용

## 전체 레이아웃

```
┌─────────────────────────────────────────────────────────────────┐
│                           헤더 (Header)                        │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────┐  ┌─────────────────────────────┐   │
│  │                         │  │                             │   │
│  │      차트 영역           │  │        주문서              │   │
│  │   (TradingChart)        │  │     (OrderBook)             │   │
│  │                         │  │                             │   │
│  ├─────────────────────────┤  ├─────────────────────────────┤   │
│  │                         │  │                             │   │
│  │     거래 내역            │  │       거래 폼              │   │
│  │  (TradeHistory)         │  │   (TradingForm)             │   │
│  │                         │  │                             │   │
│  └─────────────────────────┘  └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 레이아웃 구조
- **헤더**: 시장 정보, 잔고, 연결 상태 표시
- **좌측 패널**: 차트와 거래 내역 (메인 분석 영역)
- **우측 패널**: 주문서와 거래 폼 (거래 실행 영역)

## 헤더 컴포넌트

### 역할
헤더는 전체 애플리케이션의 상단에 위치하여 핵심 시장 정보와 사용자 상태를 한눈에 보여주는 역할을 합니다.

### 주요 기능

#### 1. 브랜드 및 플랫폼 정보
```typescript
// 브랜드 로고와 플랫폼명
<TrendingUp className="text-blue-500" size={24} />
<h1 className="text-xl font-bold text-trading-text-primary">xTrader</h1>
<div className="text-sm text-trading-text-muted">Professional Trading Platform</div>
```

#### 2. 실시간 시장 정보
- **현재가**: 실시간 가격 표시
- **24시간 변동률**: 색상으로 상승/하락 구분 (녹색: 상승, 빨간색: 하락)
- **24시간 고가/저가**: 당일 최고/최저가
- **24시간 거래량**: 거래 활성도 표시

```typescript
// 가격 변동률 색상 로직
const getPriceColor = (change: number) => {
  if (change > 0) return 'text-trading-green';
  if (change < 0) return 'text-trading-red';
  return 'text-trading-text-secondary';
};
```

#### 3. 잔고 표시
- **KRW 잔고**: 원화 보유량
- **BTC 잔고**: 비트코인 보유량 (소수점 6자리까지 표시)

#### 4. 연결 상태 표시
- **Live 인디케이터**: 실시간 데이터 연결 상태
- **알림, 설정, 사용자 버튼**: 추가 기능 접근

### UX 특징
- **모노스페이스 폰트**: 숫자 데이터의 가독성 향상
- **색상 코딩**: 직관적인 정보 전달
- **컴팩트한 레이아웃**: 최대한 많은 정보를 한 화면에 표시

## 차트 컴포넌트

### 역할
차트 컴포넌트는 가격 움직임을 시각적으로 분석할 수 있도록 하는 핵심 분석 도구입니다.

### 주요 기능

#### 1. 시간 간격 선택
```typescript
const intervals: TimeInterval[] = ['1m', '5m', '15m', '30m', '1h', '4h', '1d', '1w'];
```
- **단기**: 1분, 5분, 15분, 30분
- **중기**: 1시간, 4시간
- **장기**: 1일, 1주

#### 2. 차트 타입 선택
- **캔들스틱**: OHLCV 데이터 시각화
- **라인 차트**: 종가 기준 추세선

#### 3. 실시간 데이터 표시
- 캔들 데이터 개수 표시
- 최신 가격 정보
- 고가/저가/거래량 요약

### UX 특징
- **인터랙티브 컨트롤**: 시간 간격과 차트 타입을 쉽게 변경
- **데이터 상태 표시**: 로딩, 오류, 데이터 개수 등 명확한 상태 표시
- **확장 가능한 구조**: 향후 Lightweight Charts 라이브러리 연동 준비

## 주문서 컴포넌트

### 역할
주문서는 현재 시장의 매수/매도 주문 상황을 실시간으로 보여주는 핵심 컴포넌트입니다.

### 주요 기능

#### 1. 실시간 호가 표시
```typescript
// 매도 호가 (상단)
const formattedAsks = asks.map(level => ({
  ...level,
  cumulative: cumulativeAskVolume,
  percentage: (level.volume / maxVol) * 100
}));

// 매수 호가 (하단)
const formattedBids = bids.map(level => ({
  ...level,
  cumulative: cumulativeBidVolume,
  percentage: (level.volume / maxVol) * 100
}));
```

#### 2. 시각적 깊이 표시
- **배경 바**: 각 가격 레벨의 거래량을 시각적으로 표현
- **색상 구분**: 매수(녹색), 매도(빨간색)
- **누적 거래량**: 각 레벨까지의 총 거래량

#### 3. 스프레드 표시
```typescript
// 매도 최저가 - 매수 최고가
const spread = orderBook.asks[0]?.price - orderBook.bids[0]?.price;
```

#### 4. 클릭-투-필 기능
```typescript
onClick={() => onPriceClick?.(level.price)}
```
- 호가 클릭 시 거래 폼의 가격 필드에 자동 입력

### UX 특징
- **모노스페이스 폰트**: 숫자 정렬과 가독성
- **호버 효과**: 마우스 오버 시 배경색 변경
- **컴팩트한 표시**: 최대 10개 레벨까지 효율적으로 표시
- **실시간 업데이트**: 2초마다 자동 갱신

## 거래 폼 컴포넌트

### 역할
거래 폼은 사용자가 실제 주문을 제출할 수 있는 핵심 인터페이스입니다.

### 주요 기능

#### 1. 주문 타입 선택
```typescript
// 지정가 vs 시장가 선택
const [orderType, setOrderType] = useState<'Market' | 'Limit'>('Limit');
```
- **지정가**: 원하는 가격에 주문
- **시장가**: 현재 시장가에 즉시 체결

#### 2. 매수/매도 선택
```typescript
const [side, setSide] = useState<'Buy' | 'Sell'>('Buy');
```
- **색상 구분**: 매수(녹색), 매도(빨간색)
- **버튼 스타일**: 선택된 방향에 따라 버튼 색상 변경

#### 3. 가격 입력 (지정가 주문)
- **수동 입력**: 직접 가격 입력
- **±1% 조정 버튼**: 빠른 가격 조정
- **현재가 기준**: 기본값으로 현재 시장가 설정

#### 4. 수량 입력
- **정밀도**: 소수점 6자리까지 입력 가능
- **비율 선택**: 25%, 50%, 75%, 100% 버튼
- **자동 계산**: 선택한 비율에 따른 수량 자동 계산

#### 5. 잔고 확인 및 검증
```typescript
// 매수 시: KRW 잔고 확인
// 매도 시: BTC 잔고 확인
const availableBalance = balance[side === 'Buy' ? quoteCurrency : baseCurrency];
```

#### 6. 주문 요약
- **사용 가능 잔고**: 현재 보유 자산
- **주문 총액**: 가격 × 수량
- **예상 수수료**: 거래 수수료 계산

### UX 특징
- **실시간 검증**: 입력 중 실시간으로 잔고 확인
- **직관적 컨트롤**: 버튼과 입력 필드의 명확한 구분
- **오류 방지**: 부족한 잔고나 잘못된 입력에 대한 사전 경고
- **빠른 조작**: 비율 버튼과 가격 조정 버튼으로 빠른 설정

## 거래 내역 컴포넌트

### 역할
거래 내역 컴포넌트는 사용자의 과거 거래 활동을 추적하고 분석할 수 있도록 합니다.

### 주요 기능

#### 1. 탭 기반 인터페이스
```typescript
const [activeTab, setActiveTab] = useState<'executions' | 'orders'>('executions');
```
- **체결 내역**: 실제로 체결된 거래
- **주문 내역**: 제출한 주문들의 상태

#### 2. 필터링 기능
```typescript
const [filterSide, setFilterSide] = useState<'All' | 'Buy' | 'Sell'>('All');
```
- **전체**: 모든 거래 표시
- **매수**: 매수 거래만 표시
- **매도**: 매도 거래만 표시

#### 3. 체결 내역 테이블
- **시간**: 체결 시각
- **심볼**: 거래 종목
- **구분**: 매수/매도
- **가격**: 체결 가격
- **수량**: 체결 수량
- **수수료**: 거래 수수료

#### 4. 주문 내역 테이블
- **시간**: 주문 시각
- **심볼**: 거래 종목
- **구분**: 매수/매도
- **타입**: 지정가/시장가
- **가격**: 주문 가격
- **수량**: 주문 수량
- **상태**: 대기중/체결완료/취소됨

#### 5. 상태별 색상 코딩
```typescript
const getStatusColor = (status: Order['status']) => {
  switch (status) {
    case 'Filled': return 'text-trading-green';
    case 'Cancelled': return 'text-trading-red';
    case 'Pending': return 'text-trading-yellow';
    default: return 'text-trading-text-muted';
  }
};
```

### UX 특징
- **스크롤 가능**: 많은 데이터를 효율적으로 표시
- **호버 효과**: 마우스 오버 시 행 강조
- **내보내기 준비**: CSV/Excel 내보내기 기능 준비
- **실시간 업데이트**: 새로운 체결 시 자동 추가

## 실시간 데이터 연동

### WebSocket 연결
```typescript
// WebSocket 연결 관리
const { isConnected, connectionStatus, sendMessage } = useWebSocket({
  url: 'ws://127.0.0.1:7001/ws/executions',
  onMessage: (data) => {
    // 실시간 체결 데이터 처리
  },
  onConnect: () => {
    console.log('WebSocket 연결됨');
  },
  onDisconnect: () => {
    console.log('WebSocket 연결 끊김');
  }
});
```

### REST API 연동
```typescript
// 주기적 데이터 갱신 (2초마다)
useEffect(() => {
  const interval = setInterval(() => {
    fetchOrderBook();
    fetchStatistics();
  }, 2000);
  return () => clearInterval(interval);
}, []);
```

### 데이터 흐름
1. **초기 로딩**: 페이지 로드 시 모든 데이터 가져오기
2. **실시간 업데이트**: WebSocket을 통한 체결 데이터 수신
3. **주기적 갱신**: REST API를 통한 주문서/통계 데이터 갱신
4. **사용자 액션**: 주문 제출 시 즉시 데이터 갱신

## 사용자 워크플로우

### 1. 시장 분석 워크플로우
```
1. 페이지 로드 → 시장 데이터 자동 로딩
2. 차트에서 시간 간격 선택 → 차트 데이터 갱신
3. 주문서에서 시장 깊이 확인 → 매수/매도 압력 파악
4. 거래 내역에서 최근 패턴 분석 → 거래 전략 수립
```

### 2. 주문 실행 워크플로우
```
1. 주문서에서 원하는 가격 클릭 → 거래 폼에 가격 자동 입력
2. 거래 폼에서 수량 입력 → 비율 버튼으로 빠른 설정
3. 매수/매도 버튼 선택 → 잔고 확인 및 검증
4. 주문 제출 → 실시간 체결 확인
5. 거래 내역에서 결과 확인 → 포지션 관리
```

### 3. 포지션 관리 워크플로우
```
1. 거래 내역에서 현재 포지션 확인
2. 헤더에서 잔고 변화 모니터링
3. 주문서에서 청산 가격 확인
4. 필요시 반대 주문으로 포지션 청산
```

## 기술적 특징

### 1. 상태 관리
- **React Hooks**: useState, useEffect, useCallback을 활용한 효율적인 상태 관리
- **커스텀 훅**: useTradingAPI, useWebSocket으로 로직 분리
- **실시간 동기화**: 여러 컴포넌트 간 데이터 동기화

### 2. 성능 최적화
- **useMemo**: 주문서 데이터 포맷팅 최적화
- **useCallback**: 불필요한 리렌더링 방지
- **지연 로딩**: 초기 데이터 로딩 최적화

### 3. 사용자 경험
- **로딩 상태**: 모든 데이터 로딩 상태 표시
- **오류 처리**: 네트워크 오류 및 API 오류 처리
- **연결 상태**: WebSocket 연결 상태 실시간 표시

### 4. 접근성
- **키보드 네비게이션**: 모든 버튼과 입력 필드 키보드 접근 가능
- **색상 대비**: 다크 테마에서 충분한 색상 대비
- **폰트 선택**: 숫자 데이터의 가독성을 위한 모노스페이스 폰트

### 5. 확장성
- **컴포넌트 분리**: 각 기능별 독립적인 컴포넌트
- **타입 안전성**: TypeScript를 통한 타입 안전성
- **API 추상화**: 백엔드 변경에 유연하게 대응

## 결론

xTrader Frontend는 전문 트레이더를 위한 고성능 거래 인터페이스를 제공합니다. 실시간 데이터 처리, 직관적인 사용자 경험, 그리고 확장 가능한 아키텍처를 통해 효율적인 거래 환경을 구현했습니다.

각 컴포넌트는 명확한 역할과 책임을 가지며, 사용자의 거래 워크플로우를 지원하도록 설계되었습니다. 특히 실시간 데이터 연동과 사용자 인터랙션 최적화에 중점을 두어 전문적인 거래 플랫폼의 요구사항을 충족합니다.